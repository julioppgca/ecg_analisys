#include <stdio.h>
#include <stdint.h>


/**
 * @brief Data struct of f32 fir filter
 *
 * This structure used by filter internally. User should access this structure only in case of
 * extensions for the DSP Library.
 * All fields of this structure initialized by dsps_fir_init_f32(...) function.
 */
typedef struct fir_f32_s {
    float  *coeffs;     /*!< Pointer to the coefficient buffer.*/
    float  *delay;      /*!< Pointer to the delay line buffer.*/
    int     N;          /*!< FIR filter coefficients amount.*/
    int     pos;        /*!< Position in delay line.*/
    int     decim;      /*!< Decimation factor.*/
    int     d_pos;      /*!< Actual decimation counter.*/
} fir_f32_t;


    fir_f32_t fir1, fir2;


int8_t dsps_fir_f32_ansi(fir_f32_t *fir, const float *input, float *output, int len);
int8_t dsps_fir_init_f32(fir_f32_t *fir, float *coeffs, float *delay, int N);


float sample_data[2560] = {0.1735,0.2549,0.3195,0.3205,0.2496,0.1708,0.1504,0.1927,0.2682,0.3569,0.4344,0.4562,0.4000,0.3104,0.2617,0.2797,0.3382,0.4150,0.4941,0.5313,0.4868,0.3887,0.3138,0.3058,0.3473,0.4085,0.4774,0.5292,0.5174,0.4356,0.3469,0.3145,0.3407,0.3971,0.4679,0.5318,0.5421,0.4742,0.3752,0.3201,0.3314,0.3819,0.4518,0.5254,0.5582,0.5115,0.4132,0.3369,0.3253,0.3640,0.4250,0.4943,0.5447,0.5305,0.4464,0.3568,0.3271,0.3583,0.4177,0.4884,0.5503,0.5574,0.4875,0.3897,0.3376,0.3513,0.4030,0.4720,0.5423,0.5713,0.5230,0.4260,0.3529,0.3447,0.3868,0.4507,0.5215,0.5728,0.5600,0.4770,0.3874,0.3568,0.3872,0.4475,0.5206,0.5829,0.5878,0.5173,0.4214,0.3706,0.3851,0.4378,0.5053,0.5731,0.6025,0.5567,0.4619,0.3910,0.3846,0.4267,0.4915,0.5633,0.6111,0.5922,0.5064,0.4170,0.3866,0.4162,0.4739,0.5443,0.6088,0.6203,0.5552,0.4623,0.4130,0.4251,0.4730,0.5388,0.6081,0.6366,0.5842,0.4802,0.4041,0.3976,0.4398,0.5023,0.5727,0.6201,0.5982,0.5084,0.4172,0.3847,0.4099,0.4628,0.5282,0.5850,0.5871,0.5133,0.4120,0.3549,0.3620,0.4070,0.4700,0.5363,0.5632,0.5121,0.4106,0.3336,0.3218,0.3595,0.4206,0.4893,0.5330,0.5078,0.4165,0.3253,0.2945,0.3234,0.3826,0.4554,0.5167,0.5177,0.4415,0.3433,0.2955,0.3139,0.3682,0.4361,0.5049,0.5360,0.4897,0.3907,0.3167,0.3105,0.3510,0.4104,0.4788,0.5256,0.5032,0.4137,0.3239,0.2937,0.3224,0.3804,0.4506,0.5113,0.5163,0.4438,0.3455,0.2957,0.3108,0.3612,0.4284,0.4977,0.5248,0.4741,0.3767,0.3067,0.3032,0.3478,0.4119,0.4816,0.5283,0.5078,0.4207,0.3326,0.3030,0.3299,0.3849,0.4544,0.5158,0.5212,0.4496,0.3507,0.2979,0.3121,0.3649,0.4327,0.4996,0.5261,0.4768,0.3796,0.3084,0.3017,0.3400,0.3976,0.4655,0.5135,0.4930,0.4051,0.3197,0.2958,0.3266,0.3824,0.4518,0.5117,0.5125,0.4379,0.3431,0.2964,0.3104,0.3590,0.4260,0.4958,0.5237,0.4729,0.3737,0.3002,0.2927,0.3347,0.3984,0.4696,0.5177,0.4957,0.4037,0.3126,0.2864,0.3194,0.3780,0.4473,0.5050,0.5052,0.4318,0.3361,0.2874,0.3033,0.3553,0.4220,0.4913,0.5232,0.4766,0.3800,0.3131,0.3136,0.3577,0.4199,0.4905,0.5373,0.5139,0.4244,0.3388,0.3172,0.3517,0.4075,0.4748,0.5376,0.5449,0.4725,0.3753,0.3283,0.3468,0.4012,0.4719,0.5445,0.5772,0.5323,0.4386,0.3725,0.3715,0.4130,0.4727,0.5411,0.5832,0.5520,0.4565,0.3648,0.3333,0.3617,0.4211,0.4925,0.5530,0.5557,0.4788,0.3756,0.3212,0.3306,0.3749,0.4370,0.5007,0.5219,0.4652,0.3606,0.2845,0.2791,0.3226,0.3841,0.4544,0.5018,0.4752,0.3810,0.2932,0.2667,0.2948,0.3515,0.4219,0.4801,0.4802,0.4049,0.3068,0.2584,0.2745,0.3235,0.3882,0.4571,0.4861,0.4356,0.3371,0.2690,0.2688,0.3120,0.3709,0.4370,0.4796,0.4536,0.3665,0.2849,0.2614,0.2932,0.3500,0.4100,0.4541,0.4473,0.3719,0.2743,0.2247,0.2389,0.2897,0.3633,0.4485,0.5113,0.5223,0.4911,0.4700,0.5115,0.6122,0.7294,0.8383,0.9010,0.8424,0.6632,0.4876,0.4094,0.4028,0.4211,0.4546,0.4773,0.4467,0.3587,0.2555,0.1910,0.1918,0.2412,0.3088,0.3680,0.3791,0.3163,0.2182,0.1557,0.1558,0.1959,0.2506,0.3052,0.3317,0.2913,0.1873,0.0904,0.0646,0.1005,0.1625,0.2418,0.3157,0.3290,0.2647,0.1819,0.1520,0.1887,0.2606,0.3456,0.4299,0.4693,0.4222,0.3242,0.2605,0.2687,0.3241,0.3999,0.4807,0.5302,0.5039,0.4113,0.3263,0.3085,0.3465,0.4047,0.4717,0.5266,0.5209,0.4415,0.3453,0.3010,0.3233,0.3817,0.4530,0.5241,0.5530,0.4983,0.3971,0.3363,0.3461,0.3935,0.4563,0.5263,0.5673,0.5401,0.4570,0.3781,0.3551,0.3885,0.4448,0.5024,0.5456,0.5356,0.4538,0.3572,0.3191,0.3444,0.4003,0.4752,0.5514,0.5760,0.5157,0.4085,0.3292,0.3195,0.3677,0.4432,0.5203,0.5617,0.5287,0.4345,0.3493,0.3274,0.3624,0.4250,0.4968,0.5530,0.5513,0.4777,0.3839,0.3422,0.3686,0.4270,0.4935,0.5582,0.5804,0.5188,0.4073,0.3326,0.3371,0.3923,0.4614,0.5318,0.5780,0.5555,0.4662,0.3828,0.3678,0.4088,0.4677,0.5371,0.6000,0.6013,0.5206,0.4213,0.3784,0.4004,0.4567,0.5314,0.6058,0.6301,0.5721,0.4733,0.4095,0.4120,0.4588,0.5247,0.5944,0.6339,0.6022,0.5089,0.4231,0.3998,0.4314,0.4873,0.5558,0.6140,0.6106,0.5280,0.4250,0.3748,0.3904,0.4411,0.5072,0.5722,0.5917,0.5308,0.4268,0.3576,0.3568,0.4009,0.4649,0.5340,0.5708,0.5327,0.4337,0.3453,0.3214,0.3534,0.4113,0.4824,0.5414,0.5365,0.4520,0.3474,0.2982,0.3208,0.3813,0.4532,0.5220,0.5460,0.4854,0.3760,0.3036,0.3038,0.3516,0.4263,0.5125,0.5620,0.5271,0.4215,0.3107,0.2550,0.2743,0.3562,0.4755,0.5825,0.6011,0.4991,0.3485,0.2566,0.2594,0.3288,0.4365,0.5494,0.6003,0.5361,0.3924,0.2734,0.2492,0.3073,0.4080,0.5237,0.6020,0.5726,0.4403,0.3036,0.2487,0.2815,0.3705,0.4870,0.5836,0.5915,0.4872,0.3407,0.2543,0.2644,0.3395,0.4477,0.5579,0.6038,0.5337,0.3898,0.2768,0.2573,0.3175,0.4175,0.5260,0.5978,0.5741,0.4527,0.3220,0.2725,0.3086,0.3886,0.4897,0.5748,0.5723,0.4586,0.3101,0.2249,0.2373,0.3254,0.4537,0.5727,0.6112,0.5254,0.3621,0.2307,0.1994,0.2566,0.3652,0.4898,0.5693,0.5401,0.4125,0.2789,0.2275,0.2729,0.3785,0.5052,0.6032,0.6017,0.4807,0.3253,0.2426,0.2550,0.3276,0.4373,0.5511,0.5919,0.5060,0.3446,0.2212,0.1970,0.2513,0.3501,0.4706,0.5564,0.5330,0.4060,0.2762,0.2282,0.2641,0.3541,0.4739,0.5712,0.5739,0.4713,0.3441,0.2824,0.3053,0.3788,0.4733,0.5600,0.5860,0.5157,0.3955,0.3166,0.3169,0.3699,0.4497,0.5392,0.5915,0.5583,0.4602,0.3754,0.3571,0.3969,0.4656,0.5451,0.6064,0.5979,0.5021,0.3832,0.3259,0.3464,0.4082,0.4869,0.5610,0.5789,0.5069,0.3914,0.3171,0.3158,0.3591,0.4229,0.4977,0.5431,0.5056,0.3980,0.3005,0.2710,0.3026,0.3667,0.4442,0.5045,0.4993,0.4144,0.3089,0.2600,0.2820,0.3414,0.4184,0.4921,0.5113,0.4443,0.3354,0.2637,0.2633,0.3137,0.3872,0.4653,0.5084,0.4706,0.3683,0.2810,0.2633,0.3049,0.3756,0.4552,0.5123,0.5030,0.4171,0.3103,0.2581,0.2807,0.3447,0.4207,0.4848,0.4893,0.4047,0.2788,0.1994,0.2012,0.2504,0.3149,0.3916,0.4506,0.4405,0.3807,0.3563,0.4012,0.4871,0.6029,0.7420,0.8522,0.8751,0.7981,0.6580,0.5282,0.4697,0.4784,0.5153,0.5465,0.5249,0.4208,0.2872,0.2082,0.2019,0.2382,0.2993,0.3683,0.4011,0.3548,0.2463,0.1565,0.1455,0.1924,0.2547,0.3219,0.3670,0.3371,0.2315,0.1184,0.0613,0.0757,0.1420,0.2279,0.3005,0.3234,0.2742,0.1863,0.1330,0.1488,0.2121,0.2990,0.3925,0.4492,0.4244,0.3352,0.2575,0.2476,0.2966,0.3720,0.4587,0.5283,0.5260,0.4414,0.3425,0.2993,0.3193,0.3754,0.4506,0.5227,0.5444,0.4851,0.3856,0.3238,0.3293,0.3764,0.4433,0.5171,0.5549,0.5123,0.4109,0.3280,0.3134,0.3542,0.4202,0.4977,0.5585,0.5497,0.4611,0.3631,0.3283,0.3560,0.4097,0.4760,0.5404,0.5552,0.4909,0.3903,0.3281,0.3346,0.3883,0.4622,0.5379,0.5784,0.5445,0.4518,0.3693,0.3469,0.3792,0.4410,0.5153,0.5716,0.5637,0.4815,0.3842,0.3427,0.3684,0.4304,0.5076,0.5769,0.5887,0.5185,0.4151,0.3517,0.3555,0.4072,0.4811,0.5542,0.5909,0.5556,0.4621,0.3808,0.3652,0.4039,0.4679,0.5461,0.6060,0.5931,0.5045,0.4095,0.3718,0.3971,0.4597,0.5386,0.6086,0.6244,0.5589,0.4547,0.3905,0.3973,0.4493,0.5222,0.6006,0.6420,0.6037,0.5067,0.4255,0.4104,0.4515,0.5180,0.5924,0.6467,0.6353,0.5506,0.4533,0.4106,0.4326,0.4917,0.5655,0.6289,0.6376,0.5666,0.4574,0.3874,0.3906,0.4414,0.5092,0.5777,0.6105,0.5667,0.4653,0.3811,0.3624,0.3967,0.4566,0.5280,0.5801,0.5631,0.4707,0.3691,0.3274,0.3503,0.4055,0.4754,0.5401,0.5515,0.4812,0.3754,0.3125,0.3191,0.3682,0.4381,0.5152,0.5540,0.5066,0.3989,0.3173,0.3092,0.3521,0.4176,0.4967,0.5537,0.5339,0.4389,0.3415,0.3052,0.3308,0.3893,0.4635,0.5315,0.5450,0.4753,0.3682,0.3060,0.3178,0.3719,0.4404,0.5114,0.5480,0.5075,0.4082,0.3248,0.3083,0.3483,0.4155,0.4926,0.5472,0.5310,0.4410,0.3434,0.3058,0.3354,0.4001,0.4755,0.5381,0.5452,0.4732,0.3676,0.3067,0.3173,0.3699,0.4402,0.5137,0.5475,0.4982,0.3910,0.3059,0.2910,0.3304,0.3978,0.4813,0.5448,0.5320,0.4422,0.3481,0.3133,0.3394,0.4000,0.4750,0.5371,0.5417,0.4682,0.3616,0.2971,0.3042,0.3576,0.4321,0.5122,0.5552,0.5128,0.4030,0.3103,0.2938,0.3356,0.3983,0.4740,0.5370,0.5239,0.4214,0.3101,0.2711,0.3076,0.3828,0.4703,0.5428,0.5560,0.4850,0.3709,0.2943,0.2934,0.3463,0.4281,0.5196,0.5674,0.5185,0.3988,0.3004,0.2853,0.3375,0.4123,0.4912,0.5508,0.5350,0.4317,0.3241,0.2892,0.3163,0.3722,0.4551,0.5429,0.5718,0.5044,0.3862,0.3104,0.3223,0.3858,0.4614,0.5438,0.5940,0.5490,0.4294,0.3336,0.3172,0.3654,0.4522,0.5505,0.6109,0.5873,0.4880,0.3814,0.3369,0.3671,0.4438,0.5412,0.6238,0.6348,0.5529,0.4344,0.3611,0.3646,0.4224,0.5058,0.5895,0.6256,0.5698,0.4495,0.3541,0.3392,0.3834,0.4470,0.5158,0.5670,0.5517,0.4543,0.3380,0.2863,0.3165,0.3851,0.4576,0.5189,0.5338,0.4694,0.3594,0.2849,0.2864,0.3417,0.4208,0.4991,0.5308,0.4780,0.3710,0.2862,0.2668,0.3023,0.3699,0.4494,0.5026,0.4837,0.3944,0.3034,0.2813,0.3303,0.4065,0.4818,0.5371,0.5285,0.4339,0.3128,0.2523,0.2732,0.3407,0.4285,0.5141,0.5517,0.5060,0.4007,0.3048,0.2695,0.2905,0.3373,0.3939,0.4342,0.4067,0.3070,0.2126,0.1911,0.2411,0.3465,0.4961,0.6390,0.7083,0.6927,0.6462,0.6345,0.6746,0.7270,0.7551,0.7569,0.7191,0.6121,0.4585,0.3279,0.2605,0.2547,0.2996,0.3694,0.4126,0.3838,0.2841,0.1739,0.1235,0.1432,0.1969,0.2669,0.3383,0.3567,0.2847,0.1695,0.0907,0.0786,0.1166,0.1820,0.2519,0.2854,0.2454,0.1529,0.0860,0.0958,0.1606,0.2416,0.3258,0.3897,0.3878,0.3164,0.2416,0.2265,0.2687,0.3348,0.4114,0.4819,0.4981,0.4359,0.3455,0.2979,0.3120,0.3654,0.4392,0.5145,0.5486,0.5037,0.4039,0.3272,0.3226,0.3693,0.4312,0.4993,0.5500,0.5330,0.4439,0.3512,0.3180,0.3442,0.4020,0.4759,0.5412,0.5494,0.4797,0.3831,0.3320,0.3439,0.3902,0.4532,0.5224,0.5554,0.5094,0.4097,0.3336,0.3248,0.3653,0.4283,0.5023,0.5552,0.5370,0.4496,0.3618,0.3325,0.3603,0.4182,0.4904,0.5538,0.5616,0.4907,0.3908,0.3379,0.3516,0.4016,0.4682,0.5388,0.5707,0.5254,0.4297,0.3568,0.3491,0.3919,0.4565,0.5278,0.5777,0.5608,0.4741,0.3836,0.3533,0.3836,0.4437,0.5171,0.5810,0.5888,0.5197,0.4230,0.3719,0.3872,0.4403,0.5075,0.5750,0.6035,0.5561,0.4602,0.3902,0.3866,0.4323,0.4998,0.5730,0.6204,0.5991,0.5115,0.4233,0.3957,0.4285,0.4903,0.5639,0.6272,0.6337,0.5630,0.4648,0.4115,0.4239,0.4750,0.5421,0.6093,0.6375,0.5888,0.4888,0.4128,0.4028,0.4400,0.4984,0.5678,0.6153,0.5909,0.4974,0.4058,0.3754,0.3995,0.4488,0.5125,0.5687,0.5686,0.4947,0.3978,0.3439,0.3496,0.3942,0.4595,0.5260,0.5507,0.4986,0.3968,0.3203,0.3114,0.3504,0.4087,0.4763,0.5235,0.5015,0.4105,0.3177,0.2841,0.3108,0.3703,0.4433,0.5035,0.5076,0.4394,0.3456,0.2936,0.3051,0.3553,0.4205,0.4846,0.5118,0.4678,0.3758,0.3058,0.2992,0.3405,0.4043,0.4786,0.5296,0.5068,0.4131,0.3210,0.2925,0.3223,0.3798,0.4512,0.5137,0.5190,0.4473,0.3492,0.2969,0.3101,0.3613,0.4290,0.4970,0.5230,0.4722,0.3763,0.3078,0.3036,0.3465,0.4099,0.4789,0.5249,0.5036,0.4123,0.3187,0.2900,0.3231,0.3803,0.4471,0.5073,0.5131,0.4409,0.3428,0.2920,0.3061,0.3579,0.4275,0.4968,0.5213,0.4681,0.3721,0.3046,0.2968,0.3325,0.3962,0.4767,0.5314,0.5077,0.4124,0.3196,0.2905,0.3208,0.3790,0.4501,0.5131,0.5204,0.4483,0.3451,0.2883,0.3040,0.3609,0.4312,0.5003,0.5283,0.4758,0.3736,0.3009,0.2952,0.3385,0.4090,0.4899,0.5395,0.5111,0.4161,0.3265,0.2992,0.3268,0.3780,0.4387,0.4874,0.4854,0.4251,0.3498,0.3111,0.3265,0.3799,0.4471,0.5076,0.5278,0.4749,0.3751,0.3057,0.3066,0.3525,0.4168,0.4896,0.5374,0.5141,0.4247,0.3374,0.3143,0.3541,0.4199,0.4932,0.5541,0.5568,0.4874,0.4034,0.3669,0.3849,0.4361,0.5043,0.5678,0.5891,0.5411,0.4444,0.3647,0.3482,0.3828,0.4414,0.5117,0.5585,0.5303,0.4332,0.3395,0.3080,0.3353,0.3888,0.4490,0.4990,0.4994,0.4289,0.3335,0.2829,0.2941,0.3412,0.4053,0.4694,0.4930,0.4432,0.3460,0.2732,0.2670,0.3081,0.3681,0.4390,0.4898,0.4688,0.3758,0.2763,0.2295,0.2463,0.3124,0.4097,0.5015,0.5255,0.4458,0.3125,0.2225,0.2200,0.2814,0.3778,0.4844,0.5440,0.4974,0.3665,0.2492,0.2167,0.2592,0.3443,0.4523,0.5296,0.5008,0.3683,0.2280,0.1641,0.1847,0.2587,0.3603,0.4569,0.4870,0.4173,0.3184,0.2981,0.3709,0.4884,0.6405,0.8122,0.9203,0.8985,0.7729,0.6175,0.5006,0.4627,0.4966,0.5605,0.5949,0.5315,0.3662,0.2025,0.1368,0.1587,0.2243,0.3233,0.4171,0.4237,0.3151,0.1646,0.0729,0.0785,0.1505,0.2513,0.3518,0.3917,0.3154,0.1618,0.0369,0.0000,0.0401,0.1323,0.2517,0.3443,0.3456,0.2512,0.1408,0.0993,0.1408,0.2355,0.3575,0.4648,0.4906,0.4082,0.2766,0.1913,0.1989,0.2783,0.3922,0.5087,0.5700,0.5183,0.3837,0.2709,0.2444,0.2920,0.3871,0.5046,0.5864,0.5657,0.4446,0.3110,0.2526,0.2824,0.3659,0.4760,0.5742,0.5926,0.5012,0.3634,0.2760,0.2769,0.3430,0.4446,0.5518,0.6046,0.5480,0.4130,0.3021,0.2781,0.3262,0.4159,0.5257,0.6045,0.5863,0.4694,0.3384,0.2804,0.3072,0.3840,0.4878,0.5860,0.6089,0.5207,0.3853,0.2986,0.2945,0.3560,0.4601,0.5707,0.6248,0.5755,0.4509,0.3411,0.3132,0.3625,0.4507,0.5431,0.5949,0.5642,0.4651,0.3715,0.3440,0.3803,0.4458,0.5194,0.5789,0.5809,0.5087,0.4170,0.3757,0.3943,0.4424,0.5045,0.5672,0.5902,0.5414,0.4508,0.3874,0.3857,0.4281,0.4912,0.5609,0.6039,0.5799,0.4980,0.4216,0.4002,0.4293,0.4832,0.5480,0.6008,0.5995,0.5313,0.4478,0.4114,0.4323,0.4847,0.5502,0.6118,0.6316,0.5802,0.4858,0.4182,0.4145,0.4546,0.5116,0.5733,0.6084,0.5764,0.4891,0.4118,0.3906,0.4181,0.4688,0.5277,0.5730,0.5669,0.4961,0.4078,0.3659,0.3824,0.4280,0.4848,0.5408,0.5573,0.5030,0.4103,0.3485,0.3469,0.3841,0.4381,0.4985,0.5337,0.5029,0.4150,0.3361,0.3168,0.3484,0.4017,0.4645,0.5160,0.5117,0.4383,0.3497,0.3101,0.3280,0.3756,0.4364,0.4950,0.5128,0.4617,0.3733,0.3148,0.3165,0.3575,0.4155,0.4818,0.5225,0.4920,0.4025,0.3255,0.3097,0.3428,0.3972,0.4614,0.5133,0.5094,0.4378,0.3523,0.3155,0.3337,0.3793,0.4404,0.5029,0.5228,0.4692,0.3782,0.3201,0.3244,0.3671,0.4231,0.4845,0.5226,0.4941,0.4075,0.3322,0.3178,0.3513,0.4042,0.4666,0.5176,0.5138,0.4411,0.3519,0.3121,0.3317,0.3796,0.4395,0.5002,0.5201,0.4666,0.3755,0.3174,0.3198,0.3599,0.4159,0.4781,0.5147,0.4841,0.3973,0.3216,0.3053,0.3377,0.3919,0.4562,0.5066,0.5003,0.4275,0.3407,0.3026,0.3241,0.3755,0.4369,0.4954,0.5131,0.4589,0.3679,0.3115,0.3155,0.3559,0.4137,0.4786,0.5150,0.4835,0.3978,0.3224,0.3043,0.3358,0.3910,0.4570,0.5088,0.5019,0.4273,0.3413,0.3051,0.3245,0.3723,0.4336,0.4949,0.5158,0.4636,0.3724,0.3176,0.3287,0.3744,0.4296,0.4925,0.5341,0.5082,0.4248,0.3522,0.3363,0.3670,0.4214,0.4892,0.5445,0.5421,0.4725,0.3905,0.3584,0.3838,0.4395,0.5077,0.5698,0.5867,0.5341,0.4471,0.3904,0.3917,0.4300,0.4822,0.5383,0.5674,0.5295,0.4385,0.3619,0.3443,0.3739,0.4249,0.4851,0.5304,0.5195,0.4429,0.3538,0.3146,0.3330,0.3806,0.4405,0.4958,0.5067,0.4476,0.3534,0.2915,0.2922,0.3339,0.3906,0.4525,0.4893,0.4571,0.3674,0.2923,0.2789,0.3131,0.3692,0.4353,0.4854,0.4773,0.4029,0.3155,0.2785,0.2999,0.3490,0.4103,0.4694,0.4812,0.4170,0.3203,0.2639,0.2724,0.3199,0.3805,0.4420,0.4760,0.4450,0.3592,0.2817,0.2567,0.2752,0.3194,0.3825,0.4350,0.4261,0.3465,0.2572,0.2264,0.2647,0.3507,0.4729,0.6007,0.6714,0.6635,0.6312,0.6349,0.6846,0.7488,0.7846,0.7708,0.7129,0.6126,0.4800,0.3656,0.3141,0.3107,0.3315,0.3791,0.4232,0.3994,0.3039,0.2082,0.1668,0.1753,0.2123,0.2684,0.3258,0.3423,0.2880,0.1937,0.1272,0.1196,0.1505,0.1973,0.2496,0.2769,0.2418,0.1590,0.0965,0.0988,0.1501,0.2206,0.2990,0.3628,0.3696,0.3114,0.2418,0.2207,0.2550,0.3156,0.3851,0.4509,0.4751,0.4288,0.3485,0.3028,0.3142,0.3571,0.4145,0.4802,0.5211,0.4940,0.4101,0.3377,0.3251,0.3605,0.4160,0.4812,0.5316,0.5203,0.4399,0.3509,0.3162,0.3403,0.3949,0.4623,0.5224,0.5338,0.4756,0.3892,0.3393,0.3467,0.3896,0.4496,0.5150,0.5500,0.5139,0.4238,0.3498,0.3370,0.3717,0.4281,0.4949,0.5452,0.5345,0.4564,0.3679,0.3322,0.3555,0.4059,0.4666,0.5261,0.5429,0.4854,0.3932,0.3405,0.3515,0.3988,0.4607,0.5267,0.5618,0.5270,0.4386,0.3642,0.3499,0.3848,0.4413,0.5065,0.5554,0.5448,0.4677,0.3820,0.3512,0.3795,0.4335,0.4968,0.5570,0.5735,0.5166,0.4252,0.3710,0.3780,0.4210,0.4794,0.5435,0.5796,0.5481,0.4636,0.3925,0.3802,0.4169,0.4766,0.5453,0.5960,0.5872,0.5131,0.4290,0.3966,0.4239,0.4793,0.5424,0.5996,0.6133,0.5544,0.4608,0.4066,0.4169,0.4623,0.5207,0.5839,0.6176,0.5810,0.4914,0.4181,0.4056,0.4400,0.4920,0.5493,0.5907,0.5757,0.4965,0.4094,0.3754,0.3968,0.4426,0.4982,0.5498,0.5571,0.4945,0.4010,0.3466,0.3557,0.4002,0.4550,0.5125,0.5432,0.5054,0.4127,0.3361,0.3212,0.3517,0.4030,0.4678,0.5182,0.5062,0.4274,0.3408,0.3063,0.3291,0.3811,0.4442,0.5026,0.5164,0.4581,0.3657,0.3112,0.3184,0.3598,0.4160,0.4796,0.5135,0.4754,0.3850,0.3150,0.3078,0.3448,0.3984,0.4616,0.5109,0.4994,0.4205,0.3358,0.3070,0.3344,0.3880,0.4519,0.5085,0.5181,0.4585,0.3692,0.3164,0.3230,0.3653,0.4235,0.4870,0.5196,0.4820,0.3940,0.3245,0.3145,0.3490,0.4023,0.4646,0.5117,0.4980,0.4175,0.3323,0.3032,0.3274,0.3750,0.4358,0.4937,0.5036,0.4420,0.3519,0.3013,0.3119,0.3576,0.4170,0.4818,0.5175,0.4813,0.3901,0.3163,0.3052,0.3407,0.3941,0.4542,0.4990,0.4877,0.4123,0.3294,0.3003,0.3274,0.3805,0.4460,0.5054,0.5130,0.4464,0.3519,0.2996,0.3111,0.3597,0.4208,0.4818,0.5102,0.4690,0.3776,0.3060,0.2968,0.3347,0.3938,0.4612,0.5099,0.4964,0.4158,0.3284,0.2975,0.3247,0.3774,0.4418,0.5020,0.5127,0.4507,0.3608,0.3105,0.3206,0.3671,0.4294,0.4960,0.5315,0.4949,0.4051,0.3355,0.3282,0.3649,0.4210,0.4876,0.5375,0.5266,0.4508,0.3693,0.3424,0.3712,0.4248,0.4921,0.5584,0.5761,0.5191,0.4319,0.3806,0.3846,0.4250,0.4840,0.5451,0.5715,0.5267,0.4300,0.3552,0.3463,0.3814,0.4321,0.4929,0.5367,0.5160,0.4297,0.3377,0.2984,0.3182,0.3703,0.4344,0.4905,0.4971,0.4302,0.3349,0.2835,0.2938,0.3360,0.3907,0.4484,0.4751,0.4359,0.3499,0.2823,0.2736,0.3090,0.3634,0.4275,0.4745,0.4602,0.3830,0.3006,0.2685,0.2925,0.3475,0.4126,0.4669,0.4721,0.4065,0.3121,0.2603,0.2732,0.3207,0.3810,0.4456,0.4795,0.4419,0.3526,0.2837,0.2753,0.3048,0.3476,0.4030,0.4463,0.4277,0.3449,0.2600,0.2280,0.2519,0.3129,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000};
float filter_hp_coef[501]={-0.000076, -0.000077, -0.000078, -0.000080, -0.000081, -0.000082, -0.000084, -0.000085, -0.000087, -0.000088, -0.000090, -0.000092, -0.000094, -0.000096, -0.000098, -0.000100, -0.000103, -0.000105, -0.000108, -0.000110, -0.000113, -0.000116, -0.000119, -0.000122, -0.000126, -0.000129, -0.000133, -0.000136, -0.000140, -0.000144, -0.000148, -0.000152, -0.000157, -0.000161, -0.000166, -0.000171, -0.000176, -0.000181, -0.000186, -0.000192, -0.000197, -0.000203, -0.000209, -0.000215, -0.000221, -0.000228, -0.000234, -0.000241, -0.000248, -0.000255, -0.000262, -0.000270, -0.000277, -0.000285, -0.000293, -0.000301, -0.000309, -0.000318, -0.000326, -0.000335, -0.000344, -0.000353, -0.000363, -0.000372, -0.000382, -0.000392, -0.000402, -0.000412, -0.000423, -0.000433, -0.000444, -0.000455, -0.000466, -0.000477, -0.000489, -0.000501, -0.000513, -0.000525, -0.000537, -0.000549, -0.000562, -0.000575, -0.000587, -0.000601, -0.000614, -0.000627, -0.000641, -0.000655, -0.000669, -0.000683, -0.000697, -0.000712, -0.000726, -0.000741, -0.000756, -0.000771, -0.000786, -0.000802, -0.000818, -0.000833, -0.000849, -0.000865, -0.000881, -0.000898, -0.000914, -0.000931, -0.000948, -0.000964, -0.000981, -0.000999, -0.001016, -0.001033, -0.001051, -0.001069, -0.001086, -0.001104, -0.001122, -0.001140, -0.001158, -0.001177, -0.001195, -0.001214, -0.001232, -0.001251, -0.001270, -0.001289, -0.001308, -0.001327, -0.001346, -0.001365, -0.001384, -0.001403, -0.001423, -0.001442, -0.001462, -0.001481, -0.001501, -0.001520, -0.001540, -0.001560, -0.001579, -0.001599, -0.001619, -0.001639, -0.001658, -0.001678, -0.001698, -0.001718, -0.001738, -0.001757, -0.001777, -0.001797, -0.001817, -0.001836, -0.001856, -0.001876, -0.001895, -0.001915, -0.001934, -0.001954, -0.001973, -0.001993, -0.002012, -0.002031, -0.002051, -0.002070, -0.002089, -0.002108, -0.002126, -0.002145, -0.002164, -0.002182, -0.002201, -0.002219, -0.002238, -0.002256, -0.002274, -0.002292, -0.002309, -0.002327, -0.002344, -0.002362, -0.002379, -0.002396, -0.002413, -0.002430, -0.002446, -0.002463, -0.002479, -0.002495, -0.002511, -0.002527, -0.002542, -0.002557, -0.002573, -0.002588, -0.002602, -0.002617, -0.002631, -0.002645, -0.002659, -0.002673, -0.002686, -0.002700, -0.002713, -0.002726, -0.002738, -0.002750, -0.002763, -0.002774, -0.002786, -0.002797, -0.002808, -0.002819, -0.002830, -0.002840, -0.002850, -0.002860, -0.002870, -0.002879, -0.002888, -0.002897, -0.002905, -0.002913, -0.002921, -0.002929, -0.002936, -0.002943, -0.002950, -0.002957, -0.002963, -0.002969, -0.002974, -0.002980, -0.002985, -0.002989, -0.002994, -0.002998, -0.003002, -0.003005, -0.003008, -0.003011, -0.003014, -0.003016, -0.003018, -0.003020, -0.003021, -0.003022, -0.003023, -0.003024, 0.997052, -0.003024, -0.003023, -0.003022, -0.003021, -0.003020, -0.003018, -0.003016, -0.003014, -0.003011, -0.003008, -0.003005, -0.003002, -0.002998, -0.002994, -0.002989, -0.002985, -0.002980, -0.002974, -0.002969, -0.002963, -0.002957, -0.002950, -0.002943, -0.002936, -0.002929, -0.002921, -0.002913, -0.002905, -0.002897, -0.002888, -0.002879, -0.002870, -0.002860, -0.002850, -0.002840, -0.002830, -0.002819, -0.002808, -0.002797, -0.002786, -0.002774, -0.002763, -0.002750, -0.002738, -0.002726, -0.002713, -0.002700, -0.002686, -0.002673, -0.002659, -0.002645, -0.002631, -0.002617, -0.002602, -0.002588, -0.002573, -0.002557, -0.002542, -0.002527, -0.002511, -0.002495, -0.002479, -0.002463, -0.002446, -0.002430, -0.002413, -0.002396, -0.002379, -0.002362, -0.002344, -0.002327, -0.002309, -0.002292, -0.002274, -0.002256, -0.002238, -0.002219, -0.002201, -0.002182, -0.002164, -0.002145, -0.002126, -0.002108, -0.002089, -0.002070, -0.002051, -0.002031, -0.002012, -0.001993, -0.001973, -0.001954, -0.001934, -0.001915, -0.001895, -0.001876, -0.001856, -0.001836, -0.001817, -0.001797, -0.001777, -0.001757, -0.001738, -0.001718, -0.001698, -0.001678, -0.001658, -0.001639, -0.001619, -0.001599, -0.001579, -0.001560, -0.001540, -0.001520, -0.001501, -0.001481, -0.001462, -0.001442, -0.001423, -0.001403, -0.001384, -0.001365, -0.001346, -0.001327, -0.001308, -0.001289, -0.001270, -0.001251, -0.001232, -0.001214, -0.001195, -0.001177, -0.001158, -0.001140, -0.001122, -0.001104, -0.001086, -0.001069, -0.001051, -0.001033, -0.001016, -0.000999, -0.000981, -0.000964, -0.000948, -0.000931, -0.000914, -0.000898, -0.000881, -0.000865, -0.000849, -0.000833, -0.000818, -0.000802, -0.000786, -0.000771, -0.000756, -0.000741, -0.000726, -0.000712, -0.000697, -0.000683, -0.000669, -0.000655, -0.000641, -0.000627, -0.000614, -0.000601, -0.000587, -0.000575, -0.000562, -0.000549, -0.000537, -0.000525, -0.000513, -0.000501, -0.000489, -0.000477, -0.000466, -0.000455, -0.000444, -0.000433, -0.000423, -0.000412, -0.000402, -0.000392, -0.000382, -0.000372, -0.000363, -0.000353, -0.000344, -0.000335, -0.000326, -0.000318, -0.000309, -0.000301, -0.000293, -0.000285, -0.000277, -0.000270, -0.000262, -0.000255, -0.000248, -0.000241, -0.000234, -0.000228, -0.000221, -0.000215, -0.000209, -0.000203, -0.000197, -0.000192, -0.000186, -0.000181, -0.000176, -0.000171, -0.000166, -0.000161, -0.000157, -0.000152, -0.000148, -0.000144, -0.000140, -0.000136, -0.000133, -0.000129, -0.000126, -0.000122, -0.000119, -0.000116, -0.000113, -0.000110, -0.000108, -0.000105, -0.000103, -0.000100, -0.000098, -0.000096, -0.000094, -0.000092, -0.000090, -0.000088, -0.000087, -0.000085, -0.000084, -0.000082, -0.000081, -0.000080, -0.000078, -0.000077, -0.000076};
float filter_lp_coef[101]={-0.000078, -0.000206, -0.000337, -0.000469, -0.000598, -0.000717, -0.000814, -0.000873, -0.000878, -0.000809, -0.000650, -0.000387, -0.000016, 0.000460, 0.001026, 0.001651, 0.002296, 0.002907, 0.003421, 0.003771, 0.003891, 0.003719, 0.003206, 0.002325, 0.001072, -0.000528, -0.002416, -0.004499, -0.006653, -0.008726, -0.010543, -0.011918, -0.012665, -0.012605, -0.011585, -0.009484, -0.006228, -0.001798, 0.003766, 0.010362, 0.017826, 0.025937, 0.034426, 0.042990, 0.051303, 0.059035, 0.065870, 0.071518, 0.075738, 0.078346, 0.079229, 0.078346, 0.075738, 0.071518, 0.065870, 0.059035, 0.051303, 0.042990, 0.034426, 0.025937, 0.017826, 0.010362, 0.003766, -0.001798, -0.006228, -0.009484, -0.011585, -0.012605, -0.012665, -0.011918, -0.010543, -0.008726, -0.006653, -0.004499, -0.002416, -0.000528, 0.001072, 0.002325, 0.003206, 0.003719, 0.003891, 0.003771, 0.003421, 0.002907, 0.002296, 0.001651, 0.001026, 0.000460, -0.000016, -0.000387, -0.000650, -0.000809, -0.000878, -0.000873, -0.000814, -0.000717, -0.000598, -0.000469, -0.000337, -0.000206, -0.000078};
float delay_hp[501];
float delay_lp[101];   

float y_hp[2560], y_lp[2560];

int main()
{

    int i;


    dsps_fir_init_f32(&fir1, filter_hp_coef, delay_hp, 501);
    dsps_fir_f32_ansi(&fir1, sample_data, y_hp, 2560);


    dsps_fir_init_f32(&fir2, filter_lp_coef, delay_lp, 101);
    dsps_fir_f32_ansi(&fir2, y_hp, y_lp, 2560);


    for(i=0;i<sizeof(sample_data)/sizeof(float);i++)
    {
        printf("%f\n", y_lp[i]);
    }

    return 0;
}


/**@{*/
/**
 *  @brief   Decimation FIR filter
 *
 * Function implements FIR filter with decimation
 * The extension (_ansi) use ANSI C and could be compiled and run on any platform.
 * The extension (_ae32) is optimized for ESP32 chip.
 *
 * @param fir: pointer to fir filter structure, that must be initialized before
 * @param input: input array
 * @param output: array with result of FIR filter
 * @param len: length of input and result arrays
 *
 * @return: function returns amount of samples stored to the output array
 *          depends on the previous state value could be [0..len/decimation]
 */
int8_t dsps_fir_f32_ansi(fir_f32_t *fir, const float *input, float *output, int len)
{
    for (int i = 0 ; i < len ; i++) {
        float acc = 0;
        int coeff_pos = fir->N - 1;
        fir->delay[fir->pos] = input[i];
        fir->pos++;
        if (fir->pos >= fir->N) {
            fir->pos = 0;
        }
        for (int n = fir->pos; n < fir->N ; n++) {
            acc += fir->coeffs[coeff_pos--] * fir->delay[n];
        }
        for (int n = 0; n < fir->pos ; n++) {
            acc += fir->coeffs[coeff_pos--] * fir->delay[n];
        }
        output[i] = acc;
    }
    return 0;
}

int8_t dsps_fir_init_f32(fir_f32_t *fir, float *coeffs, float *delay, int N)
{
        fir->coeffs = coeffs;
    fir->delay = delay;
    fir->N = N;
    fir->pos = 0;

    for (int i = 0 ; i < N; i++) {
        fir->delay[i] = 0;
    }
    return 0;
}